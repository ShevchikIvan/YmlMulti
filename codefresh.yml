version: '1.0'

steps:
  clone-prj:
    type: git-clone
    revision: master
    repo: https://github.com/nCodefresh/docker-spring-boot.git

  unit-test-prj:
    working-directory: ${{clone-jim}}
    commands:
      - echo $TEST

  build-docker-spring-boot:
    type: build
    description: spring maven project
    image-name: ncodefresh/dsb
    dockerfile: Dockerfile
    working-directory: ${{clone-prj}}
    tag: latest
    environment:
      - TEST=success

  push-dockerhub:
    type: push
    candidate: ${{build-docker-spring-boot}}
    tag: latest
